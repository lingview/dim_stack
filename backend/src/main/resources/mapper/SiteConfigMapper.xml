<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="xyz.lingview.dimstack.mapper.SiteConfigMapper">

    <!-- 查询站点配置信息 -->
    <select id="getSiteConfig" resultType="xyz.lingview.dimstack.domain.SiteConfig">
        SELECT
            id,
            site_name as site_name,
            register_user_permission as register_user_permission,
            copyright,
            article_status,
            hero_image as hero_image,
            hero_title as hero_title,
            hero_subtitle as hero_subtitle,
            site_icon as site_icon,
            site_theme as site_theme,
            expansion_server as expansion_server,
            enable_notification as enable_notification,
            smtp_host as smtp_host,
            smtp_port as smtp_port,
            mail_sender_email as mail_sender_email,
            mail_sender_name as mail_sender_name,
            mail_username as mail_username,
            mail_password as mail_password,
            mail_protocol as mail_protocol,
            mail_enable_tls as mail_enable_tls,
            mail_enable_ssl as mail_enable_ssl,
            mail_default_encoding as mail_default_encoding
        FROM site_config
        WHERE id = 1
    </select>

    <!-- 查询站点名称 -->
    <select id="getSiteName" resultType="string">
        SELECT site_name
        FROM site_config
        WHERE id = 1
    </select>

    <!-- 查询注册用户默认角色 -->
    <select id="getRegisterUserPermission" resultType="int">
        SELECT register_user_permission
        FROM site_config
        WHERE id = 1
    </select>

    <!-- 查询版权信息 -->
    <select id="getCopyright" resultType="string">
        SELECT copyright
        FROM site_config
        WHERE id = 1
    </select>

    <!-- 查询文章默认状态 -->
    <select id="getArticleStatus" resultType="int">
        SELECT article_status
        FROM site_config
        WHERE id = 1
    </select>

    <!-- 查询站点图标 -->
    <select id="getSiteIcon" resultType="string">
        SELECT site_icon
        FROM site_config
        WHERE id = 1
    </select>

    <!-- 更新站点配置 -->
    <update id="updateSiteConfig" parameterType="xyz.lingview.dimstack.domain.SiteConfig">
        UPDATE site_config
        SET site_name = #{site_name},
            register_user_permission = #{register_user_permission},
            copyright = #{copyright},
            article_status = #{article_status},
            hero_image = #{hero_image},
            hero_title = #{hero_title},
            hero_subtitle = #{hero_subtitle},
            site_icon = #{site_icon},
            site_theme = #{site_theme},
            expansion_server = #{expansion_server},
            enable_notification = #{enable_notification},
            smtp_host = #{smtp_host},
            smtp_port = #{smtp_port},
            mail_sender_email = #{mail_sender_email},
            mail_sender_name = #{mail_sender_name},
            mail_username = #{mail_username},
            mail_password = #{mail_password},
            mail_protocol = #{mail_protocol},
            mail_enable_tls = #{mail_enable_tls},
            mail_enable_ssl = #{mail_enable_ssl},
            mail_default_encoding = #{mail_default_encoding}
        WHERE id = 1
    </update>
</mapper>
