import{c as v,r as i,a as p,j as e,g as B,M as K,b as J,d as X,e as Y,h as Q,i as D,o as ee}from"./index-Ce4CSjDS.js";import{F as te,a as se,I as ae,L as re}from"./list-B-rWVmIp.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],ne=v("bold",oe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],ie=v("code",le);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M6 20V4",key:"1w1bmo"}],["path",{d:"M18 20V4",key:"o2hl4u"}]],de=v("heading",ce);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],ue=v("italic",me);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],pe=v("save",ge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],he=v("video",xe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ye=v("x",fe);function be({articleData:o,onSave:k,onCancel:c,uploading:y}){const[l,x]=i.useState({title:"",cover:"",excerpt:"",tags:"",category:"",alias:"",password:""}),[b,j]=i.useState([]),[E,_]=i.useState([]),[C,U]=i.useState(!1),[w,$]=i.useState(!1),z=i.useRef(null);i.useEffect(()=>{A()},[]),i.useEffect(()=>{if(o){const s=o.password&&o.password.trim()!=="";$(s),x({title:o.article_name||o.title||"",cover:o.article_cover||o.cover||"",excerpt:o.excerpt||"",tags:o.tag||o.tags||"",category:o.category||"",alias:o.alias||"",password:""})}},[o]);const A=async()=>{try{const[s,m]=await Promise.all([p.get("/tags"),p.get("/categories")]);j(Array.isArray(s)?s:[]),_(Array.isArray(m)?m:[])}catch{j([]),_([])}},d=s=>{const{name:m,value:u}=s.target;x(M=>({...M,[m]:u}))},S=async s=>{if(!s)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(s.type)){alert("仅支持 JPG、PNG、GIF、WebP 格式的图片");return}if(s.size>5*1024*1024){alert("封面图片大小不能超过 5MB");return}U(!0);try{const u=new FormData;u.append("file",s);const M=await p.post("/uploadattachment",u,{headers:{"Content-Type":"multipart/form-data"}});x(O=>({...O,cover:M.fileUrl||""}))}catch(u){alert("封面上传失败: "+(u.response?.data?.error||u.message))}finally{U(!1)}},P=()=>{z.current?.click()},N=s=>{const m=s.target.files?.[0];m&&S(m),s.target.value=""},F=()=>{if(!l.title.trim()){alert("请输入文章标题");return}if(!l.category){alert("请选择文章分类");return}const s={...o,title:l.title,cover:l.cover,excerpt:l.excerpt,tags:l.tags,category:l.category,alias:l.alias};o?.article_id?l.password.trim()!==""&&(s.password=l.password):s.password=l.password,k(s)},H=s=>s?s.startsWith("http://")||s.startsWith("https://")?s:B().getFullUrl(s):"";return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:c}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden z-10 transform transition-all sm:my-8 sm:w-full sm:max-w-lg pointer-events-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 article-header-bg px-6 py-4 border-b border-gray-200 ",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 article-header-title",children:o?.article_id?"编辑文章":"新建文章"}),e.jsx("p",{className:"text-gray-600 article-header-subtitle text-sm mt-1",children:o?.article_id?"修改文章信息":"请填写文章的基本信息"})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700  mb-2",children:["文章标题 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"title",value:l.title,onChange:d,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-white  text-gray-900 ",placeholder:"请输入文章标题"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700  mb-2",children:"文章封面"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",name:"cover",value:l.cover,onChange:d,className:"flex-1 px-4 py-2 border border-gray-300  rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-white  text-gray-900",placeholder:"请输入封面图片URL或上传图片"}),e.jsx("button",{onClick:P,disabled:C,className:"px-4 py-2 bg-gray-100  text-gray-700  rounded-lg hover:bg-gray-200  disabled:opacity-50 transition flex items-center",children:C?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-gray-700 ",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"上传中..."]}):"上传"}),e.jsx("input",{ref:z,type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:N,className:"hidden"})]}),l.cover&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs text-gray-500  mb-1",children:"封面预览:"}),e.jsx("div",{className:"flex items-center",children:e.jsx("img",{src:H(l.cover),alt:"封面预览",className:"h-20 w-32 object-cover rounded-lg border border-gray-200  shadow-sm",onError:s=>{s.target.src="/image_error.svg"}})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"文章摘要"}),e.jsx("textarea",{name:"excerpt",value:l.excerpt,onChange:d,rows:4,className:"w-full px-4 py-2 border border-gray-300  rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-white  text-gray-900 ",placeholder:"请输入文章摘要，用于文章列表页显示和SEO优化"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 ",children:"简要描述文章内容，建议控制在150字以内，用于文章列表页显示和SEO优化"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700  mb-2",children:["文章分类 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"category",value:l.category,onChange:d,className:"w-full px-4 py-2 border border-gray-300  rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-white  text-gray-900 ",children:[e.jsx("option",{value:"",className:"text-gray-900  bg-white ",children:"请选择分类"}),E.map(s=>e.jsx("option",{value:s.article_categories||s,className:"text-gray-900  bg-white ",children:s.article_categories||s},s.id||s.article_categories))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700  mb-2",children:"文章标签"}),e.jsxs("select",{name:"tags",value:l.tags,onChange:d,className:"w-full px-4 py-2 border border-gray-300  rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-white  text-gray-900 ",children:[e.jsx("option",{value:"",className:"text-gray-900  bg-white ",children:"请选择标签"}),b.map(s=>e.jsx("option",{value:s.tag_name||s,className:"text-gray-900  bg-white ",children:s.tag_name||s},s.id||s.tag_name))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700  mb-2",children:"文章别名"}),e.jsx("input",{type:"text",name:"alias",value:l.alias,onChange:d,className:"w-full px-4 py-2 border border-gray-300  rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-white  text-gray-900 ",placeholder:"用于生成文章访问链接，如不填写将自动生成"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 ",children:"只能包含字母、数字、连字符(-)和下划线(_)，用于生成文章的访问链接"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700  mb-2",children:["文章密码",w&&e.jsx("span",{className:"ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded",children:"已设置密码"})]}),e.jsx("input",{type:"password",name:"password",value:l.password,onChange:d,className:"w-full px-4 py-2 border border-gray-300  rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-white  text-gray-900",placeholder:o?.article_id&&w?"留空保持原密码，输入新密码则更新":"请输入文章访问密码，留空则无需密码"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 ",children:o?.article_id?w?"当前文章已设置密码，留空则保持原密码不变，输入新密码则更新密码":"当前文章无密码保护，输入密码可为文章设置访问密码":"设置密码后，用户需要输入密码才能访问文章内容"})]})]})}),e.jsxs("div",{className:"bg-gray-50  px-6 py-4 flex justify-end space-x-3",children:[e.jsx("button",{onClick:c,disabled:y,className:"px-5 py-2 text-gray-700  bg-white  border border-gray-300  rounded-lg hover:bg-gray-50 disabled:opacity-50 transition",children:"取消"}),e.jsx("button",{onClick:F,disabled:y,className:"px-5 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition flex items-center",children:y?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"保存中..."]}):o?.article_id?"更新文章":"保存文章"})]})]})]})}const we={tagNames:["div","span","p","br","strong","em","u","s","del","ins","h1","h2","h3","h4","h5","h6","ul","ol","li","dl","dt","dd","blockquote","pre","code","table","thead","tbody","tr","th","td","a","img","video","audio","source","track","hr","sup","sub"],attributes:{"*":["className","id","style"],a:["href","title","target","rel"],img:["src","alt","title","width","height"],video:["src","controls","autoplay","loop","muted","poster","width","height","preload"],audio:["src","controls","autoplay","loop","muted","preload"],source:["src","type","media"],track:["src","kind","srclang","label","default"]}},I={image:["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/svg+xml","image/bmp"],video:["video/mp4","video/webm","video/ogg","video/avi","video/mov","video/mkv"],audio:["audio/mp3","audio/mpeg","audio/wav","audio/ogg","audio/m4a","audio/aac","audio/flac"]},ve={bold:"**粗体**",italic:"*斜体*",link:"[描述](https://)",image:"![alt](https://)",list:"- 列表项",code:'\n```js\nconsole.log("Hello World");\n```\n'},W=[{type:"bold",icon:ne,title:"粗体"},{type:"italic",icon:ue,title:"斜体"},{type:"heading",icon:de,title:"标题"},{type:"link",icon:se,title:"链接"},{type:"image",icon:ae,title:"插入图片",isFile:!0},{type:"video",icon:he,title:"插入视频",isFile:!0},{type:"audio",icon:K,title:"插入音频",isFile:!0},{type:"list",icon:re,title:"列表"},{type:"code",icon:ie,title:"代码"}],je=o=>{for(const[k,c]of Object.entries(I))if(c.includes(o))return k;return null},V=o=>Object.values(I).flat().includes(o),R=o=>o&&(o.startsWith("http://")||o.startsWith("https://"));function _e({onSave:o,onCancel:k,initialData:c}){const[y,l]=i.useState(c?.article_name||""),[x,b]=i.useState(c?.article_content||""),[j,E]=i.useState(!1),[_,C]=i.useState(!1),[U,w]=i.useState(!1),[$,z]=i.useState(null),[A,d]=i.useState(!1),S=i.useRef(null),P=i.useRef(null),N=i.useRef(null),F=i.useRef(new Set);i.useEffect(()=>{c&&(l(c.article_name||""),b(c.article_content||""))},[c]),i.useEffect(()=>{const t=async n=>{const g=n.clipboardData?.items;if(g){for(const h of g)if(h.kind==="file"){n.preventDefault();const f=h.getAsFile();f&&await L(f);break}}},a=n=>{S.current&&!S.current.contains(n.target)&&d(!1)},r=P.current;return r?.addEventListener("paste",t),document.addEventListener("mousedown",a),()=>{r?.removeEventListener("paste",t),document.removeEventListener("mousedown",a)}},[]);const H=()=>{if(!y.trim()||!x.trim()){alert("标题和内容不能为空");return}z({title:y,content:x,id:c?.article_id,cover:c?.article_cover||"",excerpt:c?.excerpt||"",tags:c?.tag||"",category:c?.category||"",alias:c?.alias||"",password:c?.password||""}),w(!0)},s=async t=>{E(!0),w(!1);try{const a={article_name:t.title,article_content:t.content,article_cover:t.cover||"",excerpt:t.excerpt||"",password:t.password||"",tag:t.tags||"",category:t.category||"",alias:t.alias||"",status:2,...t.id&&{article_id:t.id}},r=c&&c.article_id;let n;if(r?n=await p.post("/updatearticle",a):n=await p.post("/uploadarticle",a),n.success===!0||n.message)o(t);else throw new Error(n.message||n.error||"操作失败")}catch(a){let r="请重试";a.response?.data?.error?r=a.response.data.error:a.response?.data?.message?r=a.response.data.message:a.message&&a.message!=="请重试"&&(r=a.message),alert(`保存失败: ${r}`)}finally{E(!1)}},m=t=>{const a=ve[t];a&&b(r=>r+(r.endsWith(`
`)?"":`
`)+a)},u=t=>{W.find(r=>r.type===t)?.isFile?M(t):t==="heading"?d(r=>!r):m(t)},M=t=>{if(!N.current)return;const a=t==="image"||t==="video"||t==="audio"?I[t].join(","):Object.values(I).flat().join(",");N.current.accept=a,N.current.click()},O=t=>{const a=t.target.files?.[0];a&&L(a),t.target.value=""},L=async t=>{if(!t||!V(t.type)){V(t.type)||alert(`不支持的文件类型: ${t.type}

仅支持: ${Object.values(I).flat().join(", ")}`);return}const a=`${t.name}-${t.size}-${t.lastModified}`;if(!F.current.has(a)){F.current.add(a),C(!0);try{const r=t.size>10485760?await G(t):await q(t);if(r){const n=B().getFullUrl(r),g=je(t.type),f={image:`
![${t.name}](${n})
`,video:`
<video src="${n}" controls style="width: 400px;"></video>
`,audio:`
<audio src="${n}" controls preload="metadata"></audio>
`}[g];f&&b(T=>T+f)}}catch(r){alert("文件上传失败: "+r.message)}finally{F.current.delete(a),C(!1)}}},q=async t=>{const a=new FormData;a.append("file",t);try{return(await p.post("/uploadattachment",a,{headers:{"Content-Type":"multipart/form-data"}})).fileUrl}catch(r){throw new Error("普通上传失败: "+(r.response?.data?.error||r.message))}},G=async t=>{const r=Math.ceil(t.size/5242880);try{const{uploadId:n}=await p.post("/uploadattachment/init",{filename:t.name});for(let h=0;h<r;h++){const f=h*5242880,T=t.slice(f,Math.min(f+5242880,t.size));await p.post("/uploadattachment/part",T,{headers:{"Upload-Id":n,"Chunk-Index":h,"Content-Type":"application/octet-stream"}})}const{fileUrl:g}=await p.post("/uploadattachment/complete",{uploadId:n,filename:t.name});return g}catch(n){throw new Error("分片上传失败: "+(n.response?.data?.error||n.message))}},Z={h1:t=>e.jsx("h1",{className:"text-3xl font-bold mt-6 mb-4 ",...t}),h2:t=>e.jsx("h2",{className:"text-2xl font-bold mt-5 mb-3 ",...t}),h3:t=>e.jsx("h3",{className:"text-xl font-semibold mt-4 mb-2 ",...t}),h4:t=>e.jsx("h4",{className:"text-lg font-semibold mt-3 mb-2 ",...t}),p:t=>e.jsx("p",{className:"mb-3 leading-relaxed text-gray-700 ",...t}),ul:t=>e.jsx("ul",{className:"list-disc list-inside mb-3 text-gray-700 ",...t}),ol:t=>e.jsx("ol",{className:"list-decimal list-inside mb-3 text-gray-700 ",...t}),li:t=>e.jsx("li",{className:"mb-1 text-gray-700 ",...t}),blockquote:t=>e.jsx("blockquote",{className:"border-l-4 border-blue-500 pl-4 italic my-3 text-gray-600 ",...t}),code({className:t,children:a,...r}){const n=/language-(\w+)/.exec(t||"");return n?e.jsx(D,{style:ee,language:n[1],PreTag:"div",...r,children:String(a).replace(/\n$/,"")}):e.jsx("code",{className:"bg-gray-100  px-1 py-0.5 rounded text-sm font-mono text-gray-800 dark:text-white",...r,children:a})},a:({href:t,children:a,...r})=>R(t)?e.jsx("a",{href:t,className:"text-blue-600 dark:text-blue-400 hover:underline hover:text-blue-500 dark:hover:text-blue-300",target:"_blank",rel:"noopener noreferrer",...r,children:a}):e.jsx("span",{...r,children:a}),img:({src:t,alt:a,...r})=>R(t)?e.jsx("img",{src:t,alt:a,className:"rounded-lg shadow-sm my-4 block cursor-pointer border border-gray-200",style:{maxHeight:"300px",maxWidth:"400px",height:"auto",width:"auto",objectFit:"contain"},onClick:()=>window.open(t,"_blank"),title:"点击查看大图",...r}):null,audio:({src:t,controls:a=!0,preload:r="metadata",...n})=>{if(!R(t))return null;const g=t.split("/").pop()?.split("?")[0]||"音频文件";return e.jsxs("div",{className:"inline-block my-4 p-4 bg-gray-100  border border-gray-200 rounded-xl shadow-sm max-w-lg",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center mr-3",children:e.jsx(K,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900  truncate",title:g,children:g}),e.jsx("div",{className:"text-xs text-gray-500 ",children:"音频文件"})]})]}),e.jsx("audio",{src:t,controls:a,preload:r,className:"w-full rounded-md",style:{height:"40px",outline:"none"},...n})]})},source:({src:t,type:a,...r})=>R(t)?e.jsx("source",{src:t,type:a,...r}):null};return e.jsxs("div",{className:"fixed inset-0 z-50 bg-white flex flex-col",children:[e.jsxs("div",{className:"border-b border-gray-200 p-4 flex items-center justify-between bg-white",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"h-6 w-6 text-blue-600"}),e.jsx("input",{type:"text",value:y,onChange:t=>l(t.target.value),placeholder:"请输入文章标题",className:"text-xl font-semibold border-none focus:outline-none focus:ring-0 p-0"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[_&&e.jsx("div",{className:"text-sm text-blue-600",children:"文件上传中..."}),e.jsxs("button",{onClick:k,className:"flex items-center px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",children:[e.jsx(ye,{className:"h-4 w-4 mr-1"}),"取消"]}),e.jsxs("button",{onClick:H,disabled:j||_,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[e.jsx(pe,{className:"h-4 w-4 mr-1"}),j?"保存中...":"保存"]})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"w-1/2 flex flex-col border-r border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"flex flex-wrap items-center justify-between border-b border-gray-200 bg-gray-50 px-2 markdown-editor-toolbar",children:W.map(t=>e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("button",{onClick:()=>u(t.type),title:t.title,className:"p-2 sm:p-3 hover:bg-gray-100 rounded w-12 h-12 flex items-center justify-center sm:w-10 sm:h-10",children:e.jsx(t.icon,{className:"h-5 w-5 sm:h-4 sm:w-4"})}),t.type==="heading"&&A&&e.jsx("div",{ref:S,className:"absolute top-full left-0 mt-1 w-32 bg-white rounded-md shadow-lg border border-gray-200 z-10 heading-menu",children:["# 一级标题","## 二级标题","### 三级标题"].map((a,r)=>e.jsx("button",{onClick:()=>{b(n=>n+`
`+a+`
`),d(!1)},className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-sm",children:a},r))})]},t.type))}),e.jsx("textarea",{ref:P,value:x,onChange:t=>b(t.target.value),placeholder:"在此输入 Markdown 内容...",className:"flex-1 p-4 focus:outline-none font-mono resize-none text-gray-900 bg-white ",spellCheck:!1})]}),e.jsx("div",{className:"w-1/2 p-4 overflow-y-auto bg-white text-gray-900",children:e.jsx(J,{children:x,remarkPlugins:[Q],rehypePlugins:[X,[Y,we]],components:Z})})]}),e.jsx("input",{type:"file",ref:N,className:"hidden",onChange:O}),U&&e.jsx(be,{articleData:$,onSave:s,onCancel:()=>w(!1),uploading:j})]})}export{_e as default};
