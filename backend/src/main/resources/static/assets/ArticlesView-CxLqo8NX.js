import{c as a,j as t,a as i}from"./index-DjqJMg_w.js";import{S as k}from"./square-pen-Cm-743K3.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],A=a("eye-off",v);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],M=a("plus",S);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$=a("send",D);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],H=a("trash-2",C);function F({onNewArticle:m,articles:x,onEditArticle:p}){const l=e=>e&&e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),o=e=>e&&e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'"),h=e=>{if(!e)return"未知日期";try{const r=new Date(e);if(isNaN(r.getTime()))return"日期格式错误";const s=r.getFullYear(),n=String(r.getMonth()+1).padStart(2,"0"),d=String(r.getDate()).padStart(2,"0"),b=String(r.getHours()).padStart(2,"0"),_=String(r.getMinutes()).padStart(2,"0");return`${s}-${n}-${d} ${b}:${_}`}catch{return"日期格式错误"}},u=e=>{switch(e){case 1:return"已发布";case 2:return"未发布";case 3:return"待审核";case 4:return"违规 - 请编辑后重新发布";default:return"未知"}},y=e=>{switch(e){case 1:return"bg-green-100 text-green-800";case 2:return"bg-yellow-100 text-yellow-800";case 3:return"bg-red-100 text-red-800";case 4:return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},g=e=>!e||!Array.isArray(e)?[]:[...e].sort((r,s)=>{if(!r.create_time&&!s.create_time)return 0;if(!r.create_time)return 1;if(!s.create_time)return-1;const n=new Date(r.create_time).getTime();return new Date(s.create_time).getTime()-n}),w=(e=>!e||!Array.isArray(e)?[]:e.map(r=>({...r,article_name:l(r.article_name)||"无标题",author_name:l(r.author_name)||"未知作者"})))(x),c=g(w),f=async e=>{if(window.confirm("确定要删除这篇文章吗？"))try{const r=await i.post("/deletearticle",{article_id:e});r.success?(alert("文章删除成功"),window.location.reload()):alert(r.message||"删除失败")}catch{alert("删除文章时出错")}},j=async e=>{if(window.confirm("确定要取消发布这篇文章吗？"))try{const r=await i.post("/unpublisharticle",{article_id:e});r.success?(alert("文章已取消发布"),window.location.reload()):alert(r.message||"取消发布失败")}catch{alert("取消发布文章时出错")}},N=async e=>{if(window.confirm("确定要发布这篇文章吗？"))try{const r=await i.post("/publisharticle",{article_id:e});r.success?(alert("文章已发布"),window.location.reload()):alert(r.message||"发布失败")}catch{alert("发布文章时出错")}};return t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"文章管理"}),t.jsxs("button",{onClick:m,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200",children:[t.jsx(M,{className:"h-4 w-4 mr-1"}),"新建文章"]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"标题"}),t.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"作者"}),t.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"日期"}),t.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"状态"}),t.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c&&c.length>0?c.map((e,r)=>e?t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:o(e.article_name)||"无标题"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-500",children:o(e.author_name)||"未知作者"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-500",children:h(e.create_time)})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${y(e.status)}`,children:u(e.status)})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[t.jsxs("button",{onClick:()=>p(e.article_id),className:"text-blue-600 hover:text-blue-900 mr-3 flex items-center",children:[t.jsx(k,{className:"h-4 w-4 mr-1"}),"编辑"]}),e.status===1&&t.jsxs("button",{onClick:()=>j(e.article_id),className:"text-yellow-600 hover:text-yellow-900 mr-3 flex items-center",children:[t.jsx(A,{className:"h-4 w-4 mr-1"}),"取消发布"]}),e.status===2&&t.jsxs("button",{onClick:()=>N(e.article_id),className:"text-green-600 hover:text-green-900 mr-3 flex items-center",children:[t.jsx($,{className:"h-4 w-4 mr-1"}),"发布"]}),t.jsxs("button",{onClick:()=>f(e.article_id),className:"text-red-600 hover:text-red-900 flex items-center",children:[t.jsx(H,{className:"h-4 w-4 mr-1"}),"删除"]})]})]},e.article_id||r):null):t.jsx("tr",{children:t.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-sm text-gray-500",children:"暂无文章数据"})})})]})})]})}export{F as default};
